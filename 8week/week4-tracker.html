<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<link rel="apple-touch-icon" sizes="76x76" href="assets/img/apple-icon.png">
	<link rel="icon" type="image/png" href="assets/img/favicon.ico">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

	<title>Tracker</title>

	<meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0' name='viewport' />

	<!--     Fonts and icons     -->
	<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700" />
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />

	<!-- CSS Files -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/material-kit.css" rel="stylesheet"/>

    <link href="https://fonts.googleapis.com/css?family=Permanent+Marker" rel="stylesheet">

    <style>
    	.img-logo {
    		max-height: 80px;
    	}
    	.handwritting {
    		font-family: 'Permanent Marker', cursive;
    	}
    	h4 {
    		font-weight: 700;
    		font-size: 1.2em;
    	}
    	.indented p {
    		margin-left: 40px;
    	}
    	.indented {
    		margin-left: 40px;
    	}
    	.white-card {
    		padding: 20px;
    		color:black!important;
    	}
    	.fold-up {
    		margin-top: 0px!important;
    	}
    	.template {
    		display: none;
    	}
    	form {
    		z-index: 9;
    	}
    	.dropdown-menu {
    		z-index: 99;
    	}
    	.removable {
    		z-index: 0;
    		padding: 20px;
    	}
    	.table-container {
    		padding: 20px;
    	}
    	.gap {
    		margin-bottom: 30px;
    	}

    </style>

</head>

<body class="signup-page">
	<nav class="navbar navbar-transparent navbar-absolute">
    	<div class="container">
        	<img src="assets/img/white-logo.png" alt="First foot forward" class=" img-logo">
        	<img src="assets/img/8-week-challenge-w.png" alt="First foot forward" class=" img-logo pull-right">
        	
    	</div>
    </nav>

    <div class="wrapper">
		<div class="header header-filter" style="background-image: url('aaron-burden-123584.jpg'); background-size: cover; background-position: top center;">
			<div class="container">
				
						<div  id="before" class="card card-signup">
							<form class="form" method="" action="">
								<h3 class="text-center handwritting"><b>Weekly Tracker</b></h3>
								<h2 class="text-center"><b>Week Four</b></h2>
								
						      <div id="food" class="container ">
						         <row>
							        <div class="col-xs-4 col-md-3 col-md-offset-1 dropdown">
										<a href="#" id="day" class="dropbtn btn btn-simple dropdown-toggle text-left" data-toggle="dropdown">
									    	Day
									    	<b class="caret"></b>
										</a>
										<ul " class="dropdown-menu">
											<li><a value="24" onClick="selectedItem('24', 'Monday', 'day')">Monday</a></li>
											<li><a value="25" onClick="selectedItem('25', 'Tuesday', 'day')" >Tuesday</a></li>
											<li><a value="26" onClick="selectedItem('26', 'Wednesday', 'day')" >Wednesday</a></li>
											<li><a value="27" onClick="selectedItem('27', 'Thursday', 'day')" >Thursday</a></li>
											<li><a value="28" onClick="selectedItem('28', 'Friday', 'day')" >Friday</a></li>
											<li><a value="29" onClick="selectedItem('29', 'Saturday', 'day')" >Saturday</a></li>
											<li><a value="30" onClick="selectedItem('30', 'Sunday', 'day')" >Sunday</a></li>
										</ul>
									</div>
									<div class="col-xs-4 col-md-3 dropdown">
										<button id="time" href="#" class="btn btn-simple dropdown-toggle" data-toggle="dropdown"> Time <b class="caret"></b>
										</button>
										<ul  class="dropdown-menu">
											<li><a value="9" onClick="selectedItem('09', 'Breakfast', 'time')" >Breakfast</a></li>
											<li><a value="12" onClick="selectedItem('12', 'Lunch', 'time')" >Lunch</a></li>
											<li><a value="18" onClick="selectedItem('18', 'Dinner', 'time')" >Dinner</a></li>
											<li class="divider"></li>
											<li><a value="10" onClick="selectedItem('10', 'Morning Snack', 'time')" >Morning Snack</a></li>
											<li><a value="15" onClick="selectedItem('15', 'Afternoon Snack', 'time')" >Afternoon Snack</a></li>
											<li><a value="20" onClick="selectedItem('20', 'Evening Snack', 'time')" >Evening Snack</a></li>
										</ul>
									</div>
									<div class="col-xs-4 col-md-3 dropdown">
										<button id="type" href="#" class="btn btn-simple dropdown-toggle" data-toggle="dropdown"> Entry <b class="caret"></b>
										</button>
										<ul  class="dropdown-menu">
											<li><a value="food" onClick="selectedItem('food', 'Food', 'type')" >Food</a></li>
											<li><a value="exercisse" onClick="selectedItem('exercise', 'Exercise', 'type')" >Exercise</a></li>
											<li><a value="mood" onClick="selectedItem('mood', 'Mood', 'type')" >Mood</a></li>
										</ul>
									</div>
								</row>
								<row>
									<div class="col-xs-12 ">
										<textarea id="content" class="gap form-control" placeholder="Record your entry here ..." rows="5"></textarea>
									</div>
									
								</row>
								<row>
								  <a class="col-xs-12 btn btn-simple btn-primary btn-lg" onClick="sendPost()">Send</a>
								</row>
							  </div>


	               				
							</form>
							<div id="insert" class="container">
							</div>
						</div>

						<div  id="before" class="card card-signup">
							<div class="table-container">
								<table class="table">
								    <thead>
								        <tr>
								            <th class="text-center">#</th>
								            <th>Name</th>
								            <th>Job Position</th>
								            <th>Since</th>
								            <th class="text-right">Salary</th>
								            <th class="text-right">Actions</th>
								        </tr>
								    </thead>
								    <tbody>
								        <tr>
								            <td class="text-center">1</td>
								            <td>Andrew Mike</td>
								            <td>Develop</td>
								            <td>2013</td>
								            <td class="text-right">&euro; 99,225</td>
								            <td class="td-actions text-right">
								                <button type="button" rel="tooltip" title="View Profile" class="btn btn-info btn-simple btn-xs">
								                    <i class="fa fa-user"></i>
								                </button>
								                <button type="button" rel="tooltip" title="Edit Profile" class="btn btn-success btn-simple btn-xs">
								                    <i class="fa fa-edit"></i>
								                </button>
								                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
								                    <i class="fa fa-times"></i>
								                </button>
								            </td>
								        </tr>
								        <tr>
								            <td class="text-center">2</td>
								            <td>John Doe</td>
								            <td>Design</td>
								            <td>2012</td>
								            <td class="text-right">&euro; 89,241</td>
								            <td class="td-actions text-right">
								                <button type="button" rel="tooltip" title="View Profile" class="btn btn-info btn-simple btn-xs">
								                    <i class="fa fa-user"></i>
								                </button>
								                <button type="button" rel="tooltip" title="Edit Profile" class="btn btn-success btn-simple btn-xs">
								                    <i class="fa fa-edit"></i>
								                </button>
								                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
								                    <i class="fa fa-times"></i>
								                </button>
								            </td>
								        </tr>
								        <tr>
								            <td class="text-center">3</td>
								            <td>Alex Mike</td>
								            <td>Design</td>
								            <td>2010</td>
								            <td class="text-right">&euro; 92,144</td>
								            <td class="td-actions text-right">
								                <button type="button" rel="tooltip" title="View Profile" class="btn btn-info btn-simple btn-xs">
								                    <i class="fa fa-user"></i>
								                </button>
								                <button type="button" rel="tooltip" title="Edit Profile" class="btn btn-success btn-simple btn-xs">
								                    <i class="fa fa-edit"></i>
								                </button>
								                <button type="button" rel="tooltip" title="Remove" class="btn btn-danger btn-simple btn-xs">
								                    <i class="fa fa-times"></i>
								                </button>
								            </td>
								        </tr>
								    </tbody>
								</table>
							</div>
						</div>
			</div>
		</div>
    </div>
    <div class="template">
		<h4>Wednesday 9.00</h4>
		<p>I ate an apple</p>
								    	
	</div>



</body>
	<!--   Core JS Files   -->
	<script src="assets/js/jquery.min.js" type="text/javascript"></script>
	<script src="assets/js/bootstrap.min.js" type="text/javascript"></script>
	<script src="assets/js/material.min.js"></script>

	<!-- Control Center for Material Kit: activating the ripples, parallax effects, scripts from the example pages etc -->
	<script src="assets/js/material-kit.js" type="text/javascript"></script>

	<script>

	var entrytype = "food";
	var day = "17";
	var time = "9";

	

	var getUrlParameter = function getUrlParameter(sParam) {
        var sPageURL = decodeURIComponent(window.location.search.substring(1)),
            sURLVariables = sPageURL.split('&'),
            sParameterName,
            i;

        for (i = 0; i < sURLVariables.length; i++) {
            sParameterName = sURLVariables[i].split('=');

            if (sParameterName[0] === sParam) {
                return sParameterName[1] === undefined ? true : sParameterName[1];
            }
        }
    };

    	function selectedItem(value, text, id) {
    		console.log(value);
    		$( "#"+id ).html( text + ' <b class="caret"></b>' );
    		if(id === "type"){
    			entrytype = value;
    		}
    		if(id === "day"){
    			day = value;
    		}
    		if(id === "time"){
    			time = value;
    		}
    	}

		function sendPost() {

    		var when = "2017-07-" + day + " " + time + ":00:00 UTC";
    		var content = $("#content").val();

			if( getUrlParameter('u') === undefined ) {
        		window.location.href = "master-index.html";
		    } else {
		            $.post( "https://rocky-earth-6889.herokuapp.com/trackeds.json", {"tracked": {"user": getUrlParameter('u'), "entrytype": entrytype, "when": when, "content":content}} )
		              .done(function( data ) {
		              	$("#content").val(" ");
		               	fetch();
		            });
		        

		    }
		}

		function dateWrangler(date) {
			var day = date.substring(0,10);
			var time = date.substring(11,16);

			if(date.substring(8,10) == "24") { day = "Monday";}
			if(date.substring(8,10) == "25") { day = "Tuesday";}
			if(date.substring(8,10) == "26") { day = "Wednesday";}
			if(date.substring(8,10) == "27") { day = "Thursday";}
			if(date.substring(8,10) == "28") { day = "Friday";}
			if(date.substring(8,10) == "29") { day = "Saturday";}
			if(date.substring(8,10) == "30") { day = "Sunday";}

			if(date.substring(11,13) == "09") { time = "Breakfast";}
			if(date.substring(11,13) == "12") { time = "Lunch";}
			if(date.substring(11,13) == "18") { time = "Dinner";}
			if(date.substring(11,13) == "10") { time = "Morning Snack";}
			if(date.substring(11,13) == "15") { time = "Afternoon Snack";}
			if(date.substring(11,13) == "20") { time = "Evening Snack";}

			return day + " - " + time;
		}
    		

    	function fetch() {

    		

    		$.get( "https://notes.1stfootforward.co.nz/tracked/fetch.json", { user: getUrlParameter('u') } )
			  .done(function( data ) {

			  		$('.removable').remove();
			    
				    $.each(data, function(i, item) {

				    	if( (new Date(data[i].when)) > (new Date("Sun Jul 23 2017 23:59:00")) ) {

				    		console.log(new Date("Sun Jul 23 2017 23:59:00"));
				    		console.log(new Date(data[i].when));
					    
						    var template = $( ".template" ).clone()

				    		template.removeClass('template');
				    		template.addClass('removable');
				    		template.find( "h4" ).html( dateWrangler( data[i].when) );
				    		template.find( "p" ).html( " <b>" + data[i].entrytype + ":</b>  " + data[i].content );

				    		$("#insert").append(template);
				    	}
					})
			});
    		
    		
    	}

    	fetch();
    	

    	
    </script>

</html>
